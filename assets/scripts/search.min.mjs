const relevantCodePieces=document.getElementsByClassName("js-search-area"),nav=document.getElementById("search__nav")||null,counter=document.getElementById("search__counter")||null,counterCurrent=document.getElementById("site__counter--current")||null,counterMax=document.getElementById("site__counter--max")||null,searchError=document.getElementById("search__error"),scrollBehavior={behavior:window.matchMedia("(prefers-reduced-motion: reduce)")?"auto":"smooth"};let relevantElements,instanceAmount=getInstanceAmount(),currentIndex=0;function getRelevantElements(e){const t=new RegExp(e,"gi"),n=[];return[...relevantCodePieces].forEach((e=>{const r=document.createTreeWalker(e,NodeFilter.SHOW_TEXT);for(;r.nextNode();){const e=r.currentNode;e.nodeType===Node.TEXT_NODE&&e.textContent.match(t)&&n.push(e.parentElement)}})),instanceAmount=getInstanceAmount(n),n}export function markItems(e){removeHighlight(),relevantElements=getRelevantElements(e),relevantElements.forEach((e=>{"TD"!==e.nodeName&&"TH"!==e.nodeName||(e=e.parentElement),e.classList.add("js-highlighted"),e.setAttribute("role","mark")})),toggleSearchError(),toggleSearchNav(),instancesExist()&&(relevantElements[currentIndex].scrollIntoView(scrollBehavior),updateCounter()),currentIndex=0}export function removeHighlight(){instancesExist()&&[...document.getElementsByClassName("js-highlighted")].forEach((e=>{e.classList.remove("js-highlighted"),e.removeAttribute("role")})),relevantElements=null,instanceAmount=0,toggleSearchNav(),updateCounter(),searchError.setAttribute("hidden","")}export function gotoInstance(e){"next"===e&&currentIndex<instanceAmount?(currentIndex++,relevantElements[currentIndex].scrollIntoView(scrollBehavior),updateCounter()):"prev"===e&&currentIndex>0&&(currentIndex--,relevantElements[currentIndex].scrollIntoView(scrollBehavior),updateCounter())}function updateCounter(){const e=currentIndex+1;counter.setAttribute("aria-label",`Instance ${currentIndex+1} of ${instanceAmount}`),counterCurrent.textContent!==`${e}`&&(counterCurrent.textContent=`${e}`),counterMax.textContent!==`${instanceAmount}`&&(counterMax.textContent=`${instanceAmount}`)}function toggleSearchNav(){if(instancesExist()){const e=[...document.getElementsByClassName("search-nav__button")],t="disabled";instanceAmount>1?(e.forEach((e=>{e.hasAttribute(t)&&e.removeAttribute(t)})),counter.removeAttribute("hidden")):(e.forEach((e=>{e.hasAttribute(t)||e.setAttribute(t,"")})),counter.setAttribute("hidden","")),nav.removeAttribute("hidden")}else nav.setAttribute("hidden",""),counter.setAttribute("hidden","")}function toggleSearchError(){instancesExist()?searchError.setAttribute("hidden",""):searchError.removeAttribute("hidden")}function instancesExist(){return!!(relevantElements&&instanceAmount>0)}function getInstanceAmount(e=relevantElements){return e?e.length:0}
